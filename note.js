var np={config:{appContainer:".notepad-app"},bShowStatusBar:!1,bLineWrap:!1},$editor=function(){np.menuData=[{title:"文件(F)",menuItems:[{title:"新建(N)",shortcut:"Ctrl+N",enabled:!0,handler:function(){console.log("新建(N) menu clicked!")}},{title:"打开(O)...",shortcut:"Ctrl+O",enabled:!0,handler:function(){console.log("打开(O) menu clicked!")}},{title:"保存(S)",shortcut:"Ctrl+S",enabled:!0,handler:function(){console.log("保存(S) menu clicked!")}},{title:"另存为(A)...",shortcut:"",enabled:!0,handler:function(){console.log("另存为(A) menu clicked!")}},{title:"hr",shortcut:"",enabled:!0,handler:null},{title:"页面设置(U)...",shortcut:"",enabled:!0,handler:function(){console.log("页面设置(U) menu clicked!")}},{title:"打印(P)...",shortcut:"Ctrl+P",enabled:!0,handler:function(){console.log("打印(P) menu clicked!")}},{title:"hr",shortcut:"",enabled:!0,handler:null},{title:"退出(X)",shortcut:"",enabled:!0,handler:function(){console.log("退出(X) menu clicked!")}}],width:"202px",left:"0px"},{title:"编辑(E)",menuItems:[{title:"撤销(U)",shortcut:"Ctrl+Z",enabled:!1,handler:function(){console.log("撤销(U) menu clicked!")}},{title:"hr",shortcut:"",enabled:!0,handler:null},{title:"剪切(T)",shortcut:"Ctrl+X",enabled:!0,handler:function(){console.log("剪切(X) menu clicked!")}},{title:"复制(C)",shortcut:"Ctrl+C",enabled:!1,handler:function(){console.log("复制(C) menu clicked!")}},{title:"粘贴(P)",shortcut:"Ctrl+V",enabled:!1,handler:function(){console.log("粘贴(P) menu clicked!")}},{title:"删除(L)",shortcut:"Del",enabled:!1,handler:function(){console.log("删除(L) menu clicked!")}},{title:"hr",shortcut:"",enabled:!0,handler:null},{title:"使用 Bing 搜索...",shortcut:"Ctrl+E",enabled:!0,handler:function(){console.log("使用 Bing 搜索 menu clicked!")}},{title:"查找(F)...",shortcut:"Ctrl+F",enabled:!1,handler:function(){console.log("查找(F) menu clicked!")}},{title:"查找下一个(N)",shortcut:"F3",enabled:!1,handler:function(){console.log("查找下一个(N) menu clicked!")}},{title:"替换(R)...",shortcut:"Ctrl+H",enabled:!0,handler:function(){console.log("替换(R) menu clicked!")}},{title:"转到(G)...",shortcut:"Ctrl+G",enabled:!0,handler:function(){console.log("转到(G) menu clicked!")}},{title:"hr",shortcut:"",enabled:!0,handler:null},{title:"全选(A)",shortcut:"Ctrl+A",enabled:!0,handler:function(){console.log("全选(A) menu clicked!")}},{title:"时间/日期(D)",shortcut:"F5",enabled:!0,handler:function(){console.log("时间/日期(D) menu clicked!")}}],width:"218px",left:"52px"},{title:"格式(O)",menuItems:[{title:"自动换行(W)",shortcut:"",enabled:!0,handler:function(){console.log("自动换行(W) menu clicked!")}},{title:"字体(F)...",shortcut:"",enabled:!0,handler:function(){$dlgFont.show()}}],width:"156px",left:"106px"},{title:"查看(V)",menuItems:[{title:"状态栏(S)",shortcut:"",enabled:!0,handler:function(){np.bShowStatusBar=!np.bShowStatusBar,$statusBar.display(np.bShowStatusBar),$menubar.checked(3,0,np.bShowStatusBar),$editor.resize(np.bShowStatusBar)}}],width:"138px",left:"162px"},{title:"帮助(H)",menuItems:[{title:"查看帮助(H)",shortcut:"",enabled:!0,handler:function(){console.log("查看帮助(H) menu clicked!")}},{title:"关于记事本(A)",shortcut:"",enabled:!0,handler:function(){console.log("关于记事本")}}],width:"166px",left:"216px"}];var t=$('<div class="notepad-editor"><textarea spellcheck="false"></textarea></div>'),e=t.find("textarea");return{show:function(){$("body").append(t),e.trigger("focus")},resize:function(e){e?t.css({bottom:"21px"}):t.css({bottom:"0"})}}}(),$menubar=function(){var a,c=$('<div class="notepad-menubar"></div>'),d=[],r=-1;function t(){!function(){for(var e=$('<ul class="menu-title"></ul>'),t=0;t<a.length;t++){var l=$('<li class="title"></li>');l.html(a[t].title),l.attr("data-id",t),e.append(l),l.click(function(){var e=Number(this.dataset.id);r=-1===r?(d[e].css({display:"inline-block"}),e):r!==e?(d[r].css({display:"none"}),d[e].css({display:"inline-block"}),e):(d[r].css({display:"none"}),-1)}),l.hover(function(){if(-1!==r){var e=Number(this.dataset.id);d[r].css({display:"none"}),d[e].css({display:"inline-block"}),r=e}})}c.append(e)}(),function(){for(var e=0;e<a.length;e++){for(var t=$('<ul class="menus"></ul>'),l=a[e].menuItems,n=0;n<l.length;n++)if("hr"!==l[n].title){var s=$('<li class="menu-item"></li>');if(s.html(l[n].title),s.attr("data-x",e),s.attr("data-y",n),""!==l[n].shortcut){var i=$('<span class="shortcut"></span>');i.html(l[n].shortcut),s.append(i)}l[n].enabled||s.addClass("disabled"),t.append(s),s.click(function(){if(!$(this).hasClass("disabled")){var e=this.dataset.x,t=this.dataset.y;a[e].menuItems[t].handler(),d[e].css({display:"none"}),r=-1}})}else{var o=$('<li class="menu-hr"></li>');t.append(o)}t.css({width:a[e].width,left:a[e].left,display:"none"}),c.append(t),d.push(t)}}(),$("body").append(c)}return{show:function(e){a=e,t()},checked:function(e,t,l){var n=d[e].find(".menu-item")[t];l?$(n).prepend($('<span class="checked">✓</span>')[0]):$(n).find(".checked").remove()},enabled:function(e,t,l){var n=d[e].find(".menu-item")[t];l?$(n).removeClass("disabled"):$(n).addClass("disabled")}}}(),$statusBar=function(){var t=$('<div class="notepad-statusbar"><div class="left-panel"></div><div class="right-panel"><p class="row-col"></p></div></div>'),l=t.find(".row-col"),n="第&nbsp;x&nbsp;行，第&nbsp;y&nbsp;列",s={row:1,col:1};function i(e,t){l.html(n.replace("x",e).replace("y",t))}return{init:function(e){$.extend(s,e),i(s.row,s.col),$("body").append(t)},setRowCol:i,display:function(e){e?t.css("display","block"):t.css("display","none")}}}();function comList(){var s,l=$('<div class="notepad-com-list"><input class="editor" type="text"><br><ul class="list"></ul></div>'),n=l.find(".editor"),i=l.find(".list"),o={container:"",list:[],select:0,width:"200px",isFont:!1,isFontStyle:!1,selectHandler:null};function t(){var e,t=$(o.container).find(".notepad-com-list");0!==t.length&&t.remove(),$(o.container).append(l),l.css({width:o.width}),function(){var e,t,l,n=0;if(o.isFont)for(n=0;n<o.list.length;n++)(e=$('<li class="item"></li>')).css({"font-family":o.list[n]}),i.append(e.html(o.list[n]));else if(o.isFontStyle)for(n=0;n<o.list.length;n++)e=$('<li class="item"></li>'),t=e,"斜体"!==(l=o.list[n])?"粗体"!==l?"粗偏斜体"!==l||t.css({"font-weight":"bold","font-style":"italic"}):t.css({"font-weight":"bold"}):t.css({"font-style":"italic"}),i.append(e.html(o.list[n]));else for(n=0;n<o.list.length;n++)e=$('<li class="item"></li>'),i.append(e.html(o.list[n]));s=i.find(".item")}(),e=o.select,$(s[e]).addClass("selected"),n.val(o.list[e]),n.select()}this.show=function(e){$.extend(o,e),t(),i.click(function(e){$(s[o.select]).removeClass("selected"),o.select=o.list.indexOf($(e.target).html()),$(s[o.select]).addClass("selected"),n.val(o.list[o.select]),n.select(),o.selectHandler(o.select)}),n.keyup(function(){var e=0;for(e=0;e<o.list.length&&0!==o.list[e].indexOf(n.val());e++);e!==o.list.length&&(s[e].scrollIntoView({behavior:"smooth",block:"start"}),$(s[o.select]).removeClass("selected"),$(s[e]).addClass("selected"),o.select=e)})}}var $dlgFont=function(){var e=$('<div class="notepad-dlg-mask notepad-dlg-font"><div class="dialogbox notepad-dlgbox"><div class="notepad-dlg-titlebar"><p class="title">字体</p><span class="close-btn">✖</span></div><div class="main notepad-dlg-main"><div class="font-family"><p>字体(F):</p></div><div class="font-style"><p>字形(Y):</p></div><div class="font-size"><p>大小(S):</p></div><fieldset class="sample"><legend>示例</legend><p>AaBbYyZz</p></fieldset><div class="script"><label>脚本(R):<br><select><option value="西欧语言">西欧语言</option><option value="中文 GB2312">中文 GB2312</option></select></label></div><input class="btn-ok btn" type="button" value="确定"><input class="btn-cancel btn" type="button" value="取消"></div></div></div>'),s=e.find(".btn-ok"),i=e.find(".close-btn"),o=e.find(".btn-cancel");e.find(".notepad-dlg-titlebar");function a(){e.remove()}return{show:function(){var t,l,n;$("body").append(e),t=["Agency FB","Algerian","Arial","Arial Rounded MT","Axure Handwriting","Bahnschrift","Baskerville Old Face","Bauhaus 93","Bell MT","Berlin Sans FB","Bernard MT","BlackAdder ITC"],l=["常规","斜体","粗体","粗偏斜体"],n=["8","9","10","11","12","14","16","18","20","22","24","26","28","36","48","72"],(new comList).show({container:".notepad-dlg-font .font-family",width:"176px",list:t,isFont:!0,selectHandler:function(e){console.log(t[e])}}),(new comList).show({container:".notepad-dlg-font .font-style",select:3,width:"132px",list:l,isFontStyle:!0,selectHandler:function(e){console.log(l[e])}}),(new comList).show({container:".notepad-dlg-font .font-size",width:"64px",list:n,selectHandler:function(e){console.log(n[e])}}),i.click(a),o.click(a),s.click(a)}}}();